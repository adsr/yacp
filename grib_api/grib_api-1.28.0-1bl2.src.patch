--- origsrc/grib_api-1.28.0-Source/configure.ac	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/configure.ac	2020-01-11 15:26:55.962700800 +0900
@@ -3,7 +3,7 @@ dnl Process this file with autoconf to p
 AC_DEFUN([_AM_AUTOCONF_VERSION],[])
 
 AC_PREREQ([2.59])
-AC_INIT([grib_api],[ ], [Software.Support@ecmwf.int])
+AC_INIT([grib_api],[1.28.0], [Software.Support@ecmwf.int])
 
 AC_CONFIG_AUX_DIR([config])
 
@@ -40,7 +40,7 @@ AC_CONFIG_SRCDIR([src/grib_api.h])
 AC_CONFIG_HEADER([src/config.h])
 AC_CONFIG_FILES([src/grib_api_version.h])
 AC_CONFIG_FILES([rpms/grib_api.pc rpms/grib_api.spec rpms/grib_api_f90.pc])
-AM_INIT_AUTOMAKE($PACKAGE_NAME,[${PACKAGE_VERSION}],[http://www.ecmwf.int])
+AM_INIT_AUTOMAKE
 
 definition_files_path="${datadir}/grib_api/definitions"
 samples_files_path="${datadir}/grib_api/samples"
@@ -414,8 +414,8 @@ fi
 if test $without_jpeg -ne 1
 then
     AC_DEFINE(HAVE_JPEG,1,JPEG enabled)
-    AC_CHECK_LIB(jasper,jas_stream_memopen,jasper_ok=1,jasper_ok=0)
-    AC_CHECK_LIB(openjpeg,opj_image_create,openjpeg_ok=1,openjpeg_ok=0)
+    PKG_CHECK_MODULES([JASPER], [jasper], [jasper_ok=1], [jasper_ok=0])
+    PKG_CHECK_MODULES([OPENJPEG], [openjpeg], [openjpeg_ok=1], [openjpeg_ok=0])
 
     jpeg_ok=0
 
--- origsrc/grib_api-1.28.0-Source/definitions/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/definitions/Makefile.am	2020-01-11 15:26:55.993861200 +0900
@@ -3652,4 +3652,4 @@ dist_definitionswrap_DATA = \
 
 EXTRA_DIST=CMakeLists.txt
 
-include $(DEVEL_RULES)
+include $(srcdir)/$(DEVEL_RULES)
--- origsrc/grib_api-1.28.0-Source/examples/C/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/examples/C/Makefile.am	2020-01-11 15:26:56.009775900 +0900
@@ -50,10 +50,17 @@ clone_SOURCES           = clone.c
 new_sample_SOURCES      = new_sample.c
 ensemble_index_SOURCES = ensemble_index.c
 
-INCLUDES =  -I$(top_builddir)/src
+AM_CPPFLAGS =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
 
 EXTRA_DIST =$(TESTS) include.sh CMakeLists.txt include.ctest.sh.in
 
+TESTS_ENVIRONMENT = \
+    GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+    GRIB_TEMPLATES_PATH=${top_srcdir}/templates \
+    tools_dir=${abs_top_builddir}/tools/ \
+    examples_dir=${abs_top_builddir}/examples/C/ \
+    tigge_dir=${top_srcdir}/tigge/ \
+    data_dir=${top_srcdir}/data
--- origsrc/grib_api-1.28.0-Source/examples/F90/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/examples/F90/Makefile.am	2020-01-11 15:26:56.025110500 +0900
@@ -57,7 +57,7 @@ grib_api_f_get_set_uuid_SOURCES=get_set_
 f_set_gvc_SOURCES=set_gvc.f90
 grib_api_f_clone_SOURCES=clone.f90
 
-INCLUDES =  -I$(top_builddir)/src
+AM_CPPFLAGS =  -I$(top_builddir)/src
 
 AM_FCFLAGS = $(F90_MODULE_FLAG)$(top_builddir)/fortran
 
@@ -66,3 +66,10 @@ DEPENDENCIES = $(LDADD)
 
 EXTRA_DIST =$(TESTS) include.sh CMakeLists.txt include.ctest.sh.in
 
+TESTS_ENVIRONMENT = \
+	GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+	GRIB_SAMPLES_PATH=${top_srcdir}/samples \
+	tools_dir=${abs_top_builddir}/tools/ \
+	examples_dir=${abs_top_builddir}/examples/F90/ \
+	tigge_dir=${top_srcdir}/tigge/ \
+	data_dir=${top_srcdir}/data
--- origsrc/grib_api-1.28.0-Source/examples/python/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/examples/python/Makefile.am	2020-01-11 15:26:56.025110500 +0900
@@ -23,7 +23,7 @@ p_keys_iterator_SOURCES = keys_iterator.
 p_print_data_SOURCES = print_data.c
 p_iterator_SOURCES = iterator.c
 p_count_messages_SOURCES = count_messages.c
-INCLUDES =  -I$(top_builddir)/src
+AM_CPPFLAGS =  -I$(top_builddir)/src
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
 
--- origsrc/grib_api-1.28.0-Source/fortran/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/fortran/Makefile.am	2020-01-11 15:26:56.040739100 +0900
@@ -7,11 +7,13 @@ include_HEADERS = grib_api_f77.h
 
 libgrib_api_f77_la_SOURCES= grib_fortran.c grib_f77.c 
 libgrib_api_f77_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la
-libgrib_api_f77_la_LDFLAGS = -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
+libgrib_api_f77_la_LDFLAGS = -no-undefined -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
+libgrib_api_f77_la_LIBADD = $(top_builddir)/src/libgrib_api.la
 
 libgrib_api_f90_la_SOURCES= grib_fortran.c grib_f90.f90 
 libgrib_api_f90_la_DEPENDENCIES = $(top_builddir)/src/libgrib_api.la grib_api_externals.h grib_api_visibility.h grib_api_constants.h grib_kinds.h
-libgrib_api_f90_la_LDFLAGS = -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
+libgrib_api_f90_la_LDFLAGS = -no-undefined -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
+libgrib_api_f90_la_LIBADD = $(top_builddir)/src/libgrib_api.la
 
 libgrib_api_fortran_prototypes= grib_fortran.c
 
@@ -24,7 +26,8 @@ GRIB_API.mod: grib_f90.o
 endif
 
 # set the include path
-INCLUDES=  -I$(top_builddir)/src
+AM_CPPFLAGS=  -I$(top_builddir)/src -I$(top_srcdir)/src -I$(top_srcdir)/fortran
+AM_FCFLAGS = $(AM_CPPFLAGS)
 
 ## Make sure these will be cleaned even when they're not built by
 ## default.
@@ -40,7 +43,7 @@ EXTRA_DIST= grib_fortran_prototypes.h gr
             CMakeLists.txt
 
 grib_f90.f90: grib_f90_head.f90 grib_f90_tail.f90 grib_f90_int.f90 grib_f90_long_int.f90 grib_f90_int_size_t.f90 grib_f90_long_size_t.f90 same_int_long same_int_size_t grib_kinds.h
-	./create_grib_f90.sh 
+	srcdir=$(srcdir) $(srcdir)/create_grib_f90.sh
 
 grib_f90.o : grib_kinds.h
 
@@ -56,4 +59,4 @@ same_int_long: same_int_long.o grib_fort
 same_int_size_t: same_int_size_t.o grib_fortran_kinds.o
 	$(FC) $(FCFLAGS) -o same_int_size_t same_int_size_t.o grib_fortran_kinds.o
 
-include extrules.am
+include $(srcdir)/extrules.am
--- origsrc/grib_api-1.28.0-Source/fortran/create_grib_f90.sh	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/fortran/create_grib_f90.sh	2020-01-11 15:26:56.040739100 +0900
@@ -12,19 +12,18 @@ same=`./same_int_long`
 
 if [ $same -eq 1 ]
 then
- long=grib_f90_int.f90
+ long=${srcdir}/grib_f90_int.f90
 else
- long=grib_f90_long_int.f90
+ long=${srcdir}/grib_f90_long_int.f90
 fi
 
 same=`./same_int_size_t`
 
 if [ $same -eq 1 ]
 then
- sizet=grib_f90_int_size_t.f90
+ sizet=${srcdir}/grib_f90_int_size_t.f90
 else
- sizet=grib_f90_long_size_t.f90
+ sizet=${srcdir}/grib_f90_long_size_t.f90
 fi
 
-cat grib_f90_head.f90 $long $sizet grib_f90_tail.f90 > grib_f90.f90
-
+cat ${srcdir}/grib_f90_head.f90 $long $sizet ${srcdir}/grib_f90_tail.f90 > grib_f90.f90
--- origsrc/grib_api-1.28.0-Source/ifs_samples/grib1/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/ifs_samples/grib1/Makefile.am	2020-01-11 15:26:56.056366900 +0900
@@ -80,210 +80,209 @@ nodist_grib1_DATA = \
 	sh_sfc_grib2.tmpl \
     clusters_grib1.tmpl
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_1280_grib1.tmpl: ../../samples/reduced_gg_pl_1280_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib1.tmpl .
+reduced_gg_pl_1280_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl .
 
-reduced_gg_pl_1280_grib2.tmpl: ../../samples/reduced_gg_pl_1280_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib2.tmpl .
+reduced_gg_pl_1280_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_96_grib1.tmpl: ../../samples/reduced_gg_pl_96_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib1.tmpl .
+reduced_gg_pl_96_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl .
 
-reduced_gg_pl_96_grib2.tmpl: ../../samples/reduced_gg_pl_96_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib2.tmpl .
+reduced_gg_pl_96_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
-
-clusters_grib1.tmpl: ../../samples/clusters_grib1.tmpl
-	cp -f ../../samples/clusters_grib1.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
+clusters_grib1.tmpl: $(top_srcdir)/samples/clusters_grib1.tmpl
+	cp -f $(top_srcdir)/samples/clusters_grib1.tmpl .
--- origsrc/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2/Makefile.am	2020-01-11 15:26:56.087614100 +0900
@@ -80,209 +80,209 @@ nodist_grib1_mlgrib2_DATA = \
 	sh_sfc_grib2.tmpl \
 	clusters_grib1.tmpl
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_1280_grib1.tmpl: ../../samples/reduced_gg_pl_1280_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib1.tmpl .
+reduced_gg_pl_1280_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl .
 
-reduced_gg_pl_1280_grib2.tmpl: ../../samples/reduced_gg_pl_1280_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib2.tmpl .
+reduced_gg_pl_1280_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_96_grib1.tmpl: ../../samples/reduced_gg_pl_96_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib1.tmpl .
+reduced_gg_pl_96_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl .
 
-reduced_gg_pl_96_grib2.tmpl: ../../samples/reduced_gg_pl_96_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib2.tmpl .
+reduced_gg_pl_96_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
-clusters_grib1.tmpl: ../../samples/clusters_grib1.tmpl
-	cp -f ../../samples/clusters_grib1.tmpl .
+clusters_grib1.tmpl: $(top_srcdir)/samples/clusters_grib1.tmpl
+	cp -f $(top_srcdir)/samples/clusters_grib1.tmpl .
--- origsrc/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2_ieee32/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2_ieee32/Makefile.am	2020-01-11 15:26:56.103242000 +0900
@@ -79,206 +79,206 @@ nodist_grib1_mlgrib2_ieee32_DATA = \
 	sh_sfc_grib2.tmpl \
 	clusters_grib1.tmpl
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_1280_grib1.tmpl: ../../samples/reduced_gg_pl_1280_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib1.tmpl .
+reduced_gg_pl_1280_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl .
 
-reduced_gg_pl_1280_grib2.tmpl: ../../samples/reduced_gg_pl_1280_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib2.tmpl .
+reduced_gg_pl_1280_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_96_grib1.tmpl: ../../samples/reduced_gg_pl_96_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib1.tmpl .
+reduced_gg_pl_96_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl .
 
-reduced_gg_pl_96_grib2.tmpl: ../../samples/reduced_gg_pl_96_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib2.tmpl .
+reduced_gg_pl_96_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
-clusters_grib1.tmpl: ../../samples/clusters_grib1.tmpl
-	cp -f ../../samples/clusters_grib1.tmpl .
+clusters_grib1.tmpl: $(top_srcdir)/samples/clusters_grib1.tmpl
+	cp -f $(top_srcdir)/samples/clusters_grib1.tmpl .
--- origsrc/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2_ieee64/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/ifs_samples/grib1_mlgrib2_ieee64/Makefile.am	2020-01-11 15:26:56.118869800 +0900
@@ -80,211 +80,209 @@ nodist_grib1_mlgrib2_ieee64_DATA = \
 	sh_sfc_grib2.tmpl \
 	clusters_grib1.tmpl
 
-GRIB1.tmpl: ../../samples/GRIB1.tmpl
-	cp -f ../../samples/GRIB1.tmpl .
+GRIB1.tmpl: $(top_srcdir)/samples/GRIB1.tmpl
+	cp -f $(top_srcdir)/samples/GRIB1.tmpl .
 
-GRIB2.tmpl: ../../samples/GRIB2.tmpl
-	cp -f ../../samples/GRIB2.tmpl .
+GRIB2.tmpl: $(top_srcdir)/samples/GRIB2.tmpl
+	cp -f $(top_srcdir)/samples/GRIB2.tmpl .
 
-gg_sfc_grib1.tmpl: ../../samples/gg_sfc_grib1.tmpl
-	cp -f ../../samples/gg_sfc_grib1.tmpl .
+gg_sfc_grib1.tmpl: $(top_srcdir)/samples/gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib1.tmpl .
 
-budg.tmpl: ../../samples/budg.tmpl
-	cp -f ../../samples/budg.tmpl .
+budg.tmpl: $(top_srcdir)/samples/budg.tmpl
+	cp -f $(top_srcdir)/samples/budg.tmpl .
 
-gg_sfc_grib2.tmpl: ../../samples/gg_sfc_grib2.tmpl
-	cp -f ../../samples/gg_sfc_grib2.tmpl .
+gg_sfc_grib2.tmpl: $(top_srcdir)/samples/gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/gg_sfc_grib2.tmpl .
 
-polar_stereographic_pl_grib1.tmpl: ../../samples/polar_stereographic_pl_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib1.tmpl .
+polar_stereographic_pl_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib1.tmpl .
 
-polar_stereographic_pl_grib2.tmpl: ../../samples/polar_stereographic_pl_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_pl_grib2.tmpl .
+polar_stereographic_pl_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_pl_grib2.tmpl .
 
-polar_stereographic_sfc_grib1.tmpl: ../../samples/polar_stereographic_sfc_grib1.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib1.tmpl .
+polar_stereographic_sfc_grib1.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib1.tmpl .
 
-polar_stereographic_sfc_grib2.tmpl: ../../samples/polar_stereographic_sfc_grib2.tmpl
-	cp -f ../../samples/polar_stereographic_sfc_grib2.tmpl .
+polar_stereographic_sfc_grib2.tmpl: $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/polar_stereographic_sfc_grib2.tmpl .
 
-reduced_gg_ml_grib1.tmpl: ../../samples/reduced_gg_ml_grib1.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib1.tmpl .
+reduced_gg_ml_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib1.tmpl .
 
-reduced_gg_ml_grib2.tmpl: ../../samples/reduced_gg_ml_grib2.tmpl
-	cp -f ../../samples/reduced_gg_ml_grib2.tmpl .
+reduced_gg_ml_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_ml_grib2.tmpl .
 
-reduced_gg_pl_1024_grib1.tmpl: ../../samples/reduced_gg_pl_1024_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib1.tmpl .
+reduced_gg_pl_1024_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib1.tmpl .
 
-reduced_gg_pl_1024_grib2.tmpl: ../../samples/reduced_gg_pl_1024_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1024_grib2.tmpl .
+reduced_gg_pl_1024_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1024_grib2.tmpl .
 
-reduced_gg_pl_1280_grib1.tmpl: ../../samples/reduced_gg_pl_1280_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib1.tmpl .
+reduced_gg_pl_1280_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib1.tmpl .
 
-reduced_gg_pl_1280_grib2.tmpl: ../../samples/reduced_gg_pl_1280_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_1280_grib2.tmpl .
+reduced_gg_pl_1280_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_1280_grib2.tmpl .
 
-reduced_gg_pl_128_grib1.tmpl: ../../samples/reduced_gg_pl_128_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib1.tmpl .
+reduced_gg_pl_128_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib1.tmpl .
 
-reduced_gg_pl_128_grib2.tmpl: ../../samples/reduced_gg_pl_128_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_128_grib2.tmpl .
+reduced_gg_pl_128_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_128_grib2.tmpl .
 
-reduced_gg_pl_160_grib1.tmpl: ../../samples/reduced_gg_pl_160_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib1.tmpl .
+reduced_gg_pl_160_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib1.tmpl .
 
-reduced_gg_pl_160_grib2.tmpl: ../../samples/reduced_gg_pl_160_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_160_grib2.tmpl .
+reduced_gg_pl_160_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_160_grib2.tmpl .
 
-reduced_gg_pl_2000_grib1.tmpl: ../../samples/reduced_gg_pl_2000_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib1.tmpl .
+reduced_gg_pl_2000_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib1.tmpl .
 
-reduced_gg_pl_2000_grib2.tmpl: ../../samples/reduced_gg_pl_2000_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_2000_grib2.tmpl .
+reduced_gg_pl_2000_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_2000_grib2.tmpl .
 
-reduced_gg_pl_200_grib1.tmpl: ../../samples/reduced_gg_pl_200_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib1.tmpl .
+reduced_gg_pl_200_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib1.tmpl .
 
-reduced_gg_pl_200_grib2.tmpl: ../../samples/reduced_gg_pl_200_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_200_grib2.tmpl .
+reduced_gg_pl_200_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_200_grib2.tmpl .
 
-reduced_gg_pl_256_grib1.tmpl: ../../samples/reduced_gg_pl_256_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib1.tmpl .
+reduced_gg_pl_256_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib1.tmpl .
 
-reduced_gg_pl_256_grib2.tmpl: ../../samples/reduced_gg_pl_256_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_256_grib2.tmpl .
+reduced_gg_pl_256_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_256_grib2.tmpl .
 
-reduced_gg_pl_320_grib1.tmpl: ../../samples/reduced_gg_pl_320_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib1.tmpl .
+reduced_gg_pl_320_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib1.tmpl .
 
-reduced_gg_pl_320_grib2.tmpl: ../../samples/reduced_gg_pl_320_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_320_grib2.tmpl .
+reduced_gg_pl_320_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_320_grib2.tmpl .
 
-reduced_gg_pl_32_grib1.tmpl: ../../samples/reduced_gg_pl_32_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib1.tmpl .
+reduced_gg_pl_32_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib1.tmpl .
 
-reduced_gg_pl_32_grib2.tmpl: ../../samples/reduced_gg_pl_32_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_32_grib2.tmpl .
+reduced_gg_pl_32_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_32_grib2.tmpl .
 
-reduced_gg_pl_400_grib1.tmpl: ../../samples/reduced_gg_pl_400_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib1.tmpl .
+reduced_gg_pl_400_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib1.tmpl .
 
-reduced_gg_pl_400_grib2.tmpl: ../../samples/reduced_gg_pl_400_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_400_grib2.tmpl .
+reduced_gg_pl_400_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_400_grib2.tmpl .
 
-reduced_gg_pl_48_grib1.tmpl: ../../samples/reduced_gg_pl_48_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib1.tmpl .
+reduced_gg_pl_48_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib1.tmpl .
 
-reduced_gg_pl_48_grib2.tmpl: ../../samples/reduced_gg_pl_48_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_48_grib2.tmpl .
+reduced_gg_pl_48_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_48_grib2.tmpl .
 
-reduced_gg_pl_512_grib1.tmpl: ../../samples/reduced_gg_pl_512_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib1.tmpl .
+reduced_gg_pl_512_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib1.tmpl .
 
-reduced_gg_pl_512_grib2.tmpl: ../../samples/reduced_gg_pl_512_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_512_grib2.tmpl .
+reduced_gg_pl_512_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_512_grib2.tmpl .
 
-reduced_gg_pl_640_grib1.tmpl: ../../samples/reduced_gg_pl_640_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib1.tmpl .
+reduced_gg_pl_640_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib1.tmpl .
 
-reduced_gg_pl_640_grib2.tmpl: ../../samples/reduced_gg_pl_640_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_640_grib2.tmpl .
+reduced_gg_pl_640_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_640_grib2.tmpl .
 
-reduced_gg_pl_80_grib1.tmpl: ../../samples/reduced_gg_pl_80_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib1.tmpl .
+reduced_gg_pl_80_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib1.tmpl .
 
-reduced_gg_pl_80_grib2.tmpl: ../../samples/reduced_gg_pl_80_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_80_grib2.tmpl .
+reduced_gg_pl_80_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_80_grib2.tmpl .
 
-reduced_gg_pl_96_grib1.tmpl: ../../samples/reduced_gg_pl_96_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib1.tmpl .
+reduced_gg_pl_96_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib1.tmpl .
 
-reduced_gg_pl_96_grib2.tmpl: ../../samples/reduced_gg_pl_96_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_96_grib2.tmpl .
+reduced_gg_pl_96_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_96_grib2.tmpl .
 
-reduced_gg_pl_grib1.tmpl: ../../samples/reduced_gg_pl_grib1.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib1.tmpl .
+reduced_gg_pl_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib1.tmpl .
 
-reduced_gg_pl_grib2.tmpl: ../../samples/reduced_gg_pl_grib2.tmpl
-	cp -f ../../samples/reduced_gg_pl_grib2.tmpl .
+reduced_gg_pl_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_pl_grib2.tmpl .
 
-reduced_gg_sfc_grib1.tmpl: ../../samples/reduced_gg_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib1.tmpl .
+reduced_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib1.tmpl .
 
-reduced_gg_sfc_grib2.tmpl: ../../samples/reduced_gg_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_grib2.tmpl .
+reduced_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_grib2.tmpl .
 
-reduced_gg_sfc_jpeg_grib2.tmpl: ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl
-	cp -f ../../samples/reduced_gg_sfc_jpeg_grib2.tmpl .
+reduced_gg_sfc_jpeg_grib2.tmpl: $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_gg_sfc_jpeg_grib2.tmpl .
 
-reduced_ll_sfc_grib1.tmpl: ../../samples/reduced_ll_sfc_grib1.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib1.tmpl .
+reduced_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib1.tmpl .
 
-reduced_ll_sfc_grib2.tmpl: ../../samples/reduced_ll_sfc_grib2.tmpl
-	cp -f ../../samples/reduced_ll_sfc_grib2.tmpl .
+reduced_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/reduced_ll_sfc_grib2.tmpl .
 
-regular_gg_ml_grib1.tmpl: ../../samples/regular_gg_ml_grib1.tmpl
-	cp -f ../../samples/regular_gg_ml_grib1.tmpl .
+regular_gg_ml_grib1.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib1.tmpl .
 
-regular_gg_ml_grib2.tmpl: ../../samples/regular_gg_ml_grib2.tmpl
-	cp -f ../../samples/regular_gg_ml_grib2.tmpl .
+regular_gg_ml_grib2.tmpl: $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_ml_grib2.tmpl .
 
-regular_gg_pl_grib1.tmpl: ../../samples/regular_gg_pl_grib1.tmpl
-	cp -f ../../samples/regular_gg_pl_grib1.tmpl .
+regular_gg_pl_grib1.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib1.tmpl .
 
-regular_gg_pl_grib2.tmpl: ../../samples/regular_gg_pl_grib2.tmpl
-	cp -f ../../samples/regular_gg_pl_grib2.tmpl .
+regular_gg_pl_grib2.tmpl: $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_pl_grib2.tmpl .
 
-regular_gg_sfc_grib1.tmpl: ../../samples/regular_gg_sfc_grib1.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib1.tmpl .
+regular_gg_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib1.tmpl .
 
-regular_gg_sfc_grib2.tmpl: ../../samples/regular_gg_sfc_grib2.tmpl
-	cp -f ../../samples/regular_gg_sfc_grib2.tmpl .
+regular_gg_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_gg_sfc_grib2.tmpl .
 
-regular_ll_pl_grib1.tmpl: ../../samples/regular_ll_pl_grib1.tmpl
-	cp -f ../../samples/regular_ll_pl_grib1.tmpl .
+regular_ll_pl_grib1.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib1.tmpl .
 
-regular_ll_pl_grib2.tmpl: ../../samples/regular_ll_pl_grib2.tmpl
-	cp -f ../../samples/regular_ll_pl_grib2.tmpl .
+regular_ll_pl_grib2.tmpl: $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_pl_grib2.tmpl .
 
-regular_ll_sfc_grib1.tmpl: ../../samples/regular_ll_sfc_grib1.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib1.tmpl .
+regular_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib1.tmpl .
 
-regular_ll_sfc_grib2.tmpl: ../../samples/regular_ll_sfc_grib2.tmpl
-	cp -f ../../samples/regular_ll_sfc_grib2.tmpl .
+regular_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/regular_ll_sfc_grib2.tmpl .
 
-rotated_ll_pl_grib1.tmpl: ../../samples/rotated_ll_pl_grib1.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib1.tmpl .
+rotated_ll_pl_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib1.tmpl .
 
-rotated_ll_pl_grib2.tmpl: ../../samples/rotated_ll_pl_grib2.tmpl
-	cp -f ../../samples/rotated_ll_pl_grib2.tmpl .
+rotated_ll_pl_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_pl_grib2.tmpl .
 
-rotated_ll_sfc_grib1.tmpl: ../../samples/rotated_ll_sfc_grib1.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib1.tmpl .
+rotated_ll_sfc_grib1.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib1.tmpl .
 
-rotated_ll_sfc_grib2.tmpl: ../../samples/rotated_ll_sfc_grib2.tmpl
-	cp -f ../../samples/rotated_ll_sfc_grib2.tmpl .
+rotated_ll_sfc_grib2.tmpl: $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/rotated_ll_sfc_grib2.tmpl .
 
-sh_ml_grib1.tmpl: ../../samples/sh_ml_grib1.tmpl
-	cp -f ../../samples/sh_ml_grib1.tmpl .
+sh_ml_grib1.tmpl: $(top_srcdir)/samples/sh_ml_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib1.tmpl .
 
-sh_ml_grib2.tmpl: ../../samples/sh_ml_grib2.tmpl
-	cp -f ../../samples/sh_ml_grib2.tmpl .
+sh_ml_grib2.tmpl: $(top_srcdir)/samples/sh_ml_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_ml_grib2.tmpl .
 
-sh_pl_grib1.tmpl: ../../samples/sh_pl_grib1.tmpl
-	cp -f ../../samples/sh_pl_grib1.tmpl .
+sh_pl_grib1.tmpl: $(top_srcdir)/samples/sh_pl_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib1.tmpl .
 
-sh_pl_grib2.tmpl: ../../samples/sh_pl_grib2.tmpl
-	cp -f ../../samples/sh_pl_grib2.tmpl .
+sh_pl_grib2.tmpl: $(top_srcdir)/samples/sh_pl_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_pl_grib2.tmpl .
 
-sh_sfc_grib1.tmpl: ../../samples/sh_sfc_grib1.tmpl
-	cp -f ../../samples/sh_sfc_grib1.tmpl .
-
-sh_sfc_grib2.tmpl: ../../samples/sh_sfc_grib2.tmpl
-	cp -f ../../samples/sh_sfc_grib2.tmpl .
-
-clusters_grib1.tmpl: ../../samples/clusters_grib1.tmpl
-	cp -f ../../samples/clusters_grib1.tmpl .
+sh_sfc_grib1.tmpl: $(top_srcdir)/samples/sh_sfc_grib1.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib1.tmpl .
 
+sh_sfc_grib2.tmpl: $(top_srcdir)/samples/sh_sfc_grib2.tmpl
+	cp -f $(top_srcdir)/samples/sh_sfc_grib2.tmpl .
 
+clusters_grib1.tmpl: $(top_srcdir)/samples/clusters_grib1.tmpl
+	cp -f $(top_srcdir)/samples/clusters_grib1.tmpl .
--- origsrc/grib_api-1.28.0-Source/python/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/python/Makefile.am	2020-01-11 15:26:56.134502600 +0900
@@ -10,7 +10,7 @@ _gribapi_swig_la_SOURCES = gribapi_swig_
 _gribapi_swig_la_LIBADD = $(top_builddir)/src/libgrib_api.la $(PYTHON_LIBS)
 _gribapi_swig_la_LDFLAGS = -module -avoid-version $(PYTHON_LDFLAGS)
 
-INCLUDES = $(PYTHON_INCLUDES) -I$(NUMPY_INCLUDE)
+AM_CPPFLAGS = $(PYTHON_INCLUDES) -I$(NUMPY_INCLUDE)
 
 gribapi_swig_wrap.c: swig_wrap_$(PYTHON_DATA_HANDLER).c
 	cp -f swig_wrap_$(PYTHON_DATA_HANDLER).c gribapi_swig_wrap.c
@@ -121,4 +121,3 @@ gribapi_swig_wrap.c: swig_wrap_array.c
 	cp -f swig_wrap_array.c gribapi_swig_wrap.c
 
 endif
-
--- origsrc/grib_api-1.28.0-Source/src/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/src/Makefile.am	2020-01-11 15:26:56.150115900 +0900
@@ -318,10 +318,10 @@ libgrib_api_la_SOURCES = $(libgrib_api_l
 
 libgrib_api_la_LIBADD = @LIBOBJS@
 libgrib_api_la_DEPENDENCIES = grib_api.h $(libgrib_api_la_LIBADD)
-libgrib_api_la_LDFLAGS = -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
+libgrib_api_la_LDFLAGS = -no-undefined -version-info $(GRIB_ABI_CURRENT):$(GRIB_ABI_REVISION):$(GRIB_ABI_AGE)
 
 # set the include path
-INCLUDES=  -I.
+AM_CPPFLAGS +=  -I.
 
 ## Make sure these will be cleaned even when they're not built by
 ## default.
@@ -358,6 +358,4 @@ EXTRA_DIST= dummy.am griby.y gribl.l gri
             CMakeLists.txt grib_api_version.c.in \
             errors.pl make_class.pl make_hash_keys.ksh make_accessor_class_hash.ksh
 
-include $(DEVEL_RULES)
-
-
+include $(srcdir)/$(DEVEL_RULES)
--- origsrc/grib_api-1.28.0-Source/src/grib_jasper_encoding.c	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/src/grib_jasper_encoding.c	2020-01-11 15:26:56.181366600 +0900
@@ -110,7 +110,9 @@ int grib_jasper_encode(grib_context *c,
     image.maxcmpts_ = 1;
     image.clrspc_   = JAS_CLRSPC_SGRAY;
     image.cmprof_   = 0;
+#if 0
     image.inmem_    = 1;
+#endif
 
     cmpt.tlx_       = 0;
     cmpt.tly_       = 0;
--- origsrc/grib_api-1.28.0-Source/tests/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/tests/Makefile.am	2020-01-11 15:26:56.181366600 +0900
@@ -77,8 +77,16 @@ grib_util_set_spec_SOURCES = grib_util_s
 
 LDADD = $(top_builddir)/src/libgrib_api.la $(EMOS_LIB)
 
-INCLUDES   = -I$(top_builddir)/src
+AM_CPPFLAGS   = -I$(top_builddir)/src -I$(top_srcdir)/src
 
 EXTRA_DIST = $(TESTS) mf.rules filter_rules include.sh include.ctest.sh.in utils.sh \
              lamb_az_eq_area.ref CMakeLists.txt
 
+TESTS_ENVIRONMENT = \
+	GRIB_DEFINITION_PATH=${top_srcdir}/definitions \
+	GRIB_SAMPLES_PATH=${top_srcdir}/samples \
+	tools_dir=${abs_top_builddir}/tools/ \
+	tigge_dir=${top_srcdir}/tigge/ \
+	data_dir=${top_srcdir}/data \
+	test_dir=${abs_top_builddir}/tests \
+	def_dir=${top_srcdir}/definitions
--- origsrc/grib_api-1.28.0-Source/tigge/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/tigge/Makefile.am	2020-01-11 15:26:56.196993900 +0900
@@ -10,7 +10,7 @@ tigge_name_SOURCES      =  tigge_name.c
 tigge_split_SOURCES      =  tigge_split.c
 tigge_accumulations_SOURCES      =  tigge_accumulations.c
 
-INCLUDES =  -I$(top_builddir)/src
+AM_CPPFLAGS =  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
--- origsrc/grib_api-1.28.0-Source/tools/Makefile.am	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/tools/Makefile.am	2020-01-11 15:26:56.212651800 +0900
@@ -66,7 +66,7 @@ grib1to2_SOURCES              = grib1to2
 grib_check_gaussian_grid_SOURCES=grib_check_gaussian_grid.c
 
 
-INCLUDES =  -I$(top_builddir)/src
+AM_CPPFLAGS +=  -I$(top_builddir)/src -I$(top_srcdir)/src
 
 LDADD = libgrib_tools.la $(top_builddir)/src/libgrib_api.la
 DEPENDENCIES = $(LDADD)
@@ -79,7 +79,7 @@ CLEANFILES = libgrib_tools.la
 
 grib1to2$(EXEEXT): grib1to2.in
 	rm -f grib1to2
-	sed "s|@CMAKE_INSTALL_PREFIX@/bin|$(bindir)|" grib1to2.in > grib1to2
+	sed "s|@CMAKE_INSTALL_PREFIX@/bin|$(bindir)|" $(srcdir)/grib1to2.in > grib1to2
 	chmod +x grib1to2
 
 # wingetopt files are for Microsoft Windows Visual Studio support
--- origsrc/grib_api-1.28.0-Source/tools/grib_diff.c	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/tools/grib_diff.c	2020-01-11 15:26:56.228270000 +0900
@@ -398,8 +398,10 @@ static void compare_files(const char* fi
 
 int main(int argc, char *argv[])
 {
+#if !defined(__CYGWIN__)
   extern char *optarg;
   extern int optind;
+#endif
   char *tok=NULL;
   blacklist *bl=NULL,*p=NULL;
   int c;
@@ -444,4 +446,3 @@ int main(int argc, char *argv[])
   return 0;
 
 }
-
--- origsrc/grib_api-1.28.0-Source/tools/grib_packing.c	2018-12-06 00:30:28.000000000 +0900
+++ src/grib_api-1.28.0-Source/tools/grib_packing.c	2020-01-11 15:26:56.244201000 +0900
@@ -46,8 +46,10 @@ void try_this(const char* txt,double v,d
 
 int main(int argc, char *argv[])
 {
+#if !defined(__CYGWIN__)
 	extern char *optarg;
 	extern int optind;
+#endif
 	double min = 0,max = 100;
 	long bits = 16;
 	int g2 = 0;
@@ -144,5 +146,3 @@ int main(int argc, char *argv[])
 
 	return 0;
 }
-
-
