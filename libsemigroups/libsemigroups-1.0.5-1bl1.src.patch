--- origsrc/libsemigroups-1.0.5/Makefile.am	2020-01-13 21:59:32.000000000 +0900
+++ src/libsemigroups-1.0.5/Makefile.am	2020-02-02 19:18:46.491653900 +0900
@@ -6,6 +6,7 @@ AM_CXXFLAGS =  -I$(abs_top_srcdir)
 AM_CXXFLAGS += -I$(abs_top_srcdir)/include
 AM_CXXFLAGS += -I$(abs_top_srcdir)/extern/HPCombi/include
 AM_CXXFLAGS += -I$(abs_top_srcdir)/extern/HPCombi/include/fallback
+AM_CXXFLAGS += -I$(top_builddir)/include
 AM_CXXFLAGS += -std=gnu++11 -g -O3 -Wall -Wextra
 AM_CXXFLAGS += $(WARNING_CXXFLAGS)
 AM_CXXFLAGS += $(FMT_CFLAGS)
@@ -105,6 +106,7 @@ pkginclude_HEADERS += extern/HPCombi/inc
 pkginclude_HEADERS += extern/HPCombi/include/vect_generic.hpp
 endif
 
+if !LIBSEMIGROUPS_FMT
 fmtincludedir = $(includedir)/libsemigroups/fmt
 fmtinclude_HEADERS =  extern/fmt-5.3.0/include/fmt/chrono.h  
 fmtinclude_HEADERS += extern/fmt-5.3.0/include/fmt/color.h  
@@ -117,6 +119,7 @@ fmtinclude_HEADERS += extern/fmt-5.3.0/i
 fmtinclude_HEADERS += extern/fmt-5.3.0/include/fmt/printf.h  
 fmtinclude_HEADERS += extern/fmt-5.3.0/include/fmt/ranges.h  
 fmtinclude_HEADERS += extern/fmt-5.3.0/include/fmt/time.h
+endif
 
 lib_LTLIBRARIES = libsemigroups.la
 
--- origsrc/libsemigroups-1.0.5/m4/ax_check_fmt.m4	2020-01-13 21:59:32.000000000 +0900
+++ src/libsemigroups-1.0.5/m4/ax_check_fmt.m4	2020-02-02 19:18:22.119077900 +0900
@@ -27,4 +27,5 @@ AC_DEFUN([AX_CHECK_FMT], [
 
 	AC_SUBST(FMT_CFLAGS, ['-I$(srcdir)/extern/fmt-5.3.0/include'])
   fi
+  AM_CONDITIONAL([LIBSEMIGROUPS_FMT], [test x"$with_external_fmt" = xyes])
 ])
