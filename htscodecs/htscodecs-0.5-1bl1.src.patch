--- origsrc/htscodecs-0.5/Makefile.am	2020-01-30 21:27:38.000000000 +0900
+++ src/htscodecs-0.5/Makefile.am	2020-09-25 12:33:02.023878200 +0900
@@ -44,3 +44,6 @@ nobase_include_HEADERS = \
 	htscodecs/rle.h
 
 EXTRA_DIST = README.md LICENSE.md
+
+pkgconfigdir = $(libdir)/pkgconfig
+pkgconfig_DATA = $(PACKAGE).pc
--- origsrc/htscodecs-0.5/configure.ac	2020-01-30 21:27:38.000000000 +0900
+++ src/htscodecs-0.5/configure.ac	2020-09-25 12:35:11.723144900 +0900
@@ -116,4 +116,4 @@ AC_CHECK_HEADER(zlib.h)
 dnl Checks for library functions.
 AC_SEARCH_LIBS([pthread_join], [pthread])
 
-AC_OUTPUT(Makefile htscodecs/Makefile tests/Makefile)
+AC_OUTPUT(htscodecs.pc Makefile htscodecs/Makefile tests/Makefile)
--- origsrc/htscodecs-0.5/htscodecs/Makefile.am	2020-01-30 21:27:38.000000000 +0900
+++ src/htscodecs-0.5/htscodecs/Makefile.am	2020-09-25 12:26:11.921121700 +0900
@@ -53,5 +53,5 @@ libhtscodecs_la_SOURCES = \
 	c_simple_model.h \
 	varint.h
 
-libhtscodecs_la_LDFLAGS = -version-info @VERS_CURRENT@:@VERS_REVISION@:@VERS_AGE@ 
+libhtscodecs_la_LDFLAGS = -no-undefined -version-info @VERS_CURRENT@:@VERS_REVISION@:@VERS_AGE@ 
 libhtscodecs_la_LIBADD = @LIBZ@
--- origsrc/htscodecs-0.5/htscodecs.pc.in	1970-01-01 09:00:00.000000000 +0900
+++ src/htscodecs-0.5/htscodecs.pc.in	2020-09-25 12:33:01.904899400 +0900
@@ -0,0 +1,10 @@
+prefix=@prefix@
+exec_prefix=@exec_prefix@
+libdir=@libdir@
+includedir=@includedir@
+
+Name: htscodecs
+Description: Custom compression for CRAM and others
+Version: @VERSION@
+Libs: -L${libdir} -lhtscodecs
+Cflags: -I${includedir}
